#! /usr/bin/env perl

use strict;
use warnings;

use Dancer ':script';
use Dancer::Plugin::Interchange6;

set logger        => 'console';
set logger_format => '%m';

use Locale::SubCountry;
use DateTime qw();

my $now    = DateTime->now;
my $schema = shop_schema;
my $data;
my %product;

 shop_schema->deploy({add_drop_table => 1});

my $state = $schema->resultset("State")->find( { country_iso_code => 'US', state_iso_code => 'NY' });
my $state_oregon = $schema->resultset("State")->find( { country_iso_code => 'US', state_iso_code => 'OR' });

# roles
my $roles = $schema->resultset("Role")->populate([
    { roles_id => '3', name => 'editor', label => 'Editor', description => 'Editor Role' },
    { roles_id => '4', name => 'pro', label => 'Industry Pro', description => 'Pro Role' },
    { roles_id => '5', name => 'staff', label => 'Shop Staff',description => 'Staff Role'  },
  ]);

my %users;

# Create user john
$users{john} = shop_user->create(
    { username => 'john', password => 'john', first_name => 'John',
      last_name => 'Miller', email => 'sam@westbranchresort.com',
      created => $now,
      user_roles => [
          { roles_id => '4' },
      ],
  });

shop_address->create({
    users_id => $users{john}->id,
    first_name => $users{john}->first_name,
    last_name => $users{john}->last_name,
    type => 'shipping',
    address => 'Test Road',
    postal_code => '13783',
    city => 'Hancock',
    states_id => $state->id,
    country_iso_code => 'US',
});

# Create user ben
$users{ben} = shop_user->create(
    { username => 'ben', password => 'ben', first_name => 'Ben',
      last_name => 'Sheard', email => 'sam@westbranchresort.com',
      created => $now,
      user_roles => [
          { roles_id => '5' },
      ],
  });

# Create user greg
$users{greg} = shop_user->create(
    { username => 'gregory', password => 'gregory', nickname => 'pike lover',
      first_name => 'Gregor', last_name => 'Fisherman',
      email => 'greg@perl.dance', created => $now,
      user_roles => [
        { roles_id => '3' },
      ],
  });

shop_address->create({
    users_id => $users{greg}->id,
    first_name => $users{greg}->first_name,
    last_name => $users{greg}->last_name,
    type => 'shipping',
    address => 'Crescent Ave',
    postal_code => '97403',
    city => 'Eugene',
    states_id => $state_oregon->id,
    country_iso_code => 'US',
});

# Create user sam
$users{sam} = shop_user->create(
    { username => 'sam', password => 'sam', nickname => 'trout lover',
      first_name => 'Sam', last_name => 'Batschelet',
      email => 'sbatschelet@mac.com', created => $now,
      user_roles => [
        { roles_id => '1' },
        { roles_id => '5' },
      ],
  });

# Create user admin
$users{admin} = shop_user->create(
    { username => 'admin', password => 'pass', nickname => 'God',
      first_name => '', last_name => '',
      email => 'sbatschelet@mac.com', created => $now,
      user_roles => [
        { roles_id => '1' },
      ],
  });

my $nav = $schema->resultset('Navigation')->populate([
{ navigation_id => '1', priority => '1', uri => 'fly-fishing-gear', type => 'menu', scope => 'header', description => 'Gear for fly fishing', name => 'Fly Fishing Gear' },
{ navigation_id => '33', priority => '3', uri => 'clothing', type => 'menu', scope => 'clothing', description => 'Clothing for fly fishing', name => 'Fly Fishing Clothing',  },
{ navigation_id => '2', priority => '-1', uri => 'clothing/mens', type => 'menu', scope => 'header', description => 'Clothing for fly fishing', name => "Men's Clothing", parent_id =>'33' },
{ navigation_id => '3', priority => '4', uri => 'fly-tying', type => 'menu', scope => 'header', description => 'Materials for fly tying', name => 'Fly Tying Materials and Supplies'},
{ navigation_id => '4', priority => '5', uri => 'flies', type => 'menu', scope => 'header', description => 'Flies for fishing', name => 'Fly Fishing Flies'},
{ navigation_id => '41', priority => '6', uri => 'gifts', type => 'menu', scope => 'header', description => 'Gifts for fishing', name => 'Fly Fishing Gifts'},
{ navigation_id => '42', priority => '7', uri => 'sale', type => 'menu', scope => 'header', description => 'Fly Fishing Gear on Sale!', name => 'Fly Fishing Gear on Sale!'},

# gear
{ navigation_id => '5', priority => '200', uri => 'fly-fishing-gear/fly-rods', type => 'menu', scope => 'gear', description => 'Fly Rods', name => 'Fly Rods', parent_id =>'1' },
{ navigation_id => '6', priority => '300', uri => 'fly-fishing-gear/fly-reels', type => 'menu', scope => 'gear', description => 'Fly Reels', name => 'Fly Reels', parent_id =>'1' },
{ navigation_id => '7', priority => '400', uri => 'fly-fishing-gear/fly-line', type => 'menu', scope => 'gear', description => 'Fly Line & Backing', name => 'Fly Line & Backing', parent_id =>'1' },
{ navigation_id => '8', priority => '500', uri => 'fly-fishing-gear/waders', type => 'menu', scope => 'gear', description => 'Waders', name => 'Waders', parent_id =>'1' },
{ navigation_id => '9', priority => '600', uri => 'fly-fishing-gear/wading-boots', type => 'menu', scope => 'gear', description => 'Wading Boots', name => 'Wading Boots', parent_id =>'1' },
{ navigation_id => '40', priority => '610', uri => 'fly-fishing-gear/sunglasses', type => 'menu', scope => 'gear', description => 'Sunglasses', name => 'Sunglasses', parent_id =>'1' },
{ navigation_id => '10', priority => '900', uri => 'fly-fishing-gear/fly-boxes', type => 'menu', scope => 'gear', description => 'Fly Boxes', name => 'Fly Boxes', parent_id =>'1' },
{ navigation_id => '11', priority => '1000', uri => 'fly-fishing-gear/packs-vests', type => 'menu', scope => 'gear', description => 'Packs & Vests', name => 'Packs & Vests', parent_id =>'1' },

{ navigation_id => '12', uri => 'contact', type => 'menu', scope => 'nav-top', description => 'Contact', name => 'Contact', priority => '1' },
{ navigation_id => '13', uri => 'about-us', type => 'menu', scope => 'nav-top', description => 'About Us', name => 'About Us', priority => '1' },
{ navigation_id => '14', uri => 'shipping', type => 'menu', scope => 'nav-top', description => 'Shipping', name => 'Shipping', priority => '1' },
{ navigation_id => '15', uri => 'login', type => 'nav', scope => 'top-login', description => 'Login', name => 'Login', priority => '1' },
{ navigation_id => '16', uri => 'registration', type => 'nav', scope => 'top-login', description => 'Sign Up', name => 'Sign Up', priority => '1' },

# gear cont
{ navigation_id => '17', priority => '1200', uri => 'fly-fishing-gear/leader-tippet', type => 'menu', scope => 'gear', description => 'Leader & Tippet', name => 'Leader & Tippet', parent_id =>'1' },
{ navigation_id => '18', priority => '1300', uri => 'fly-fishing-gear/tools-gadgets', type => 'menu', scope => 'gear', description => 'Tools & Gadgets', name => 'Tools & Gadgets', parent_id =>'1' },
{ navigation_id => '19', priority => '700', uri => 'fly-fishing-gear/bags-luggage', type => 'menu', scope => 'gear',  description => 'Bags & Luggage', name => 'Bags & Luggage', parent_id =>'1' },
{ navigation_id => '20', priority => '1500', uri => 'fly-fishing-gear/nets', type => 'menu', scope => 'gear',  description => 'Landing Nets', name => 'Landing Nets', parent_id =>'1' },
{ navigation_id => '21', priority => '800', uri => 'fly-fishing-gear/watercraft-boats', type => 'menu', scope => 'gear', description => 'Watercraft & Boats', name => 'Watercraft & Boats', parent_id =>'1' },
{ navigation_id => '22', priority => '1400', uri => 'fly-fishing-gear/books-dvds', type => 'menu', scope => 'gear',  description => 'Books & DVDs', name => 'Books & DVDs', parent_id =>'1' },
{ navigation_id => '23', priority => '1100', uri => 'fly-fishing-gear/fly-rod-combos', type => 'menu', scope => 'gear', description => 'Fly Rod Combos', name => 'Fly Rod Combos', parent_id =>'1' },
{ navigation_id => '24', priority => '100', uri => 'fly-fishing-gear/new', type => 'menu', scope => 'gear', name => 'New Products!' , description => 'New Fly Fishing Gear!', parent_id =>'1'},

# clothing
{ navigation_id => '25', priority => '200', uri => 'clothing/mens/jackets', type => 'menu', scope => 'clothing', name => 'Jackets', description => 'Mens Jackets and Outerwear for Fly Fishing', parent_id =>'33' },
{ navigation_id => '26', priority => '300', uri => 'clothing/mens/fleece', type => 'menu', scope => 'clothing', name => 'Fleece', description => 'Mens Fleece Layering for Fly Fishing', parent_id =>'33' },
{ navigation_id => '27', priority => '400', uri => 'clothing/mens/layering', type => 'menu', scope => 'clothing', name => 'Layering', description => 'Mens Base Layerting for Fly Fishing', parent_id =>'33' },
{ navigation_id => '28', priority => '500', uri => 'clothing/mens/shirts', type => 'menu', scope => 'clothing', name => 'Shirts', description => 'Mens Shirts for Fly Fishing', parent_id =>'33' },
{ navigation_id => '29', priority => '600', uri => 'clothing/mens/t-shirts', type => 'menu', scope => 'clothing', name => 'T-Shirts', description => 'Mens Fly Fishing T-Shirts', parent_id =>'33' },
{ navigation_id => '30', priority => '700', uri => 'clothing/mens/pants', type => 'menu', scope => 'clothing', name => 'Pants', description => 'Mens Fly Fishing Pants', parent_id =>'33' },
{ navigation_id => '31', priority => '800', uri => 'clothing/mens/underwear', type => 'menu', scope => 'clothing', name => 'Underwear', description => 'Mens Fly Fishing Underwear', parent_id =>'33' },
{ navigation_id => '32', priority => '900', uri => 'clothing/mens/hats', type => 'menu', scope => 'clothing', name => 'Hats', description => 'Mens Fly Fishing Hats', parent_id =>'33' },
{ navigation_id => '34', priority => '1000', uri => 'clothing/mens/wba-logo', type => 'menu', scope => 'clothing', name => 'WBA Logo Gear', description => 'WBA Logo Gear', parent_id =>'33' },
{ navigation_id => '35', priority => '1100', uri => 'clothing/mens/shorts', type => 'menu', scope => 'clothing', name => 'Shorts', description => 'Mens Fly Fishing Shorts', parent_id =>'33' },
{ navigation_id => '36', priority => '1200', uri => 'clothing/mens/socks', type => 'menu', scope => 'clothing', name => 'Socks', description => 'Mens Fly Fishing Socks', parent_id =>'33' },
# tying
{ navigation_id => '37', priority => '100', uri => 'fly-tying/tools', type => 'menu', scope => 'tying', name => 'Fly Tying Tools', description => 'Fly Tying Tools', parent_id =>'3' },
{ navigation_id => '38', priority => '200', uri => 'fly-tying/dubbing', type => 'menu', scope => 'tying', name => 'Fly Tying Dubbing', description => 'Fly Tying Dubbing', parent_id =>'3' },
{ navigation_id => '39', priority => '300', uri => 'fly-tying/hooks', type => 'menu', scope => 'tying', name => 'Fly Tying Hooks', description => 'Fly Tying Hooks', parent_id =>'3' },

# flies
{ navigation_id => '70', priority => '200', uri => 'flies/dry-flies', type => 'menu', scope => 'flies', name => 'Dry Flies', description => 'Dry Flies', parent_id =>'4' },
{ navigation_id => '71', priority => '300', uri => 'flies/nymphs', type => 'menu', scope => 'flies', name => 'Nymphs', description => 'Nymphs', parent_id =>'4' },
{ navigation_id => '72', priority => '400', uri => 'flies/streamers', type => 'menu', scope => 'flies', name => 'Streamers', description => 'Streamers', parent_id =>'4' },

# species
{ navigation_id => '100', priority => '2', uri => 'fly-fishing-gear/species', type => 'menu', scope => 'header', name => 'Species' , description => 'Fly Fishing Gear By Species'},
{ navigation_id => '101', priority => '100', uri => 'fly-fishing-gear/trout', type => 'menu', scope => 'species', name => 'Trout' , description => 'Fly Fishing Gear for Trout', parent_id =>'100'},
{ navigation_id => '102',priority => '200', uri => 'fly-fishing-gear/steelhead', type => 'menu', scope => 'species', name => 'Steelhead' , description => 'Fly Fishing Gear for Steelhead', parent_id =>'100'},
{ navigation_id => '103', priority => '300', uri => 'fly-fishing-gear/salmon', type => 'menu', scope => 'species', name => 'Salmon' , description => 'Fly Fishing Gear for Salmon', parent_id =>'100'},
{ navigation_id => '104', priority => '400', uri => 'fly-fishing-gear/bonefish-permit', type => 'menu', scope => 'species', name => 'Bonefish - Permit' , description => 'Fly Fishing Gear for Bonefish and Permit', parent_id =>'100'},
{ navigation_id => '105', priority => '500', uri => 'fly-fishing-gear/tarpon', type => 'menu', scope => 'species', name => 'Tarpon' , description => 'Fly Fishing Gear for Tarpon', parent_id =>'100'},
{ navigation_id => '106', priority => '600', uri => 'fly-fishing-gear/striped-bass', type => 'menu', scope => 'species', name => 'Stripers' , description => 'Fly Fishing Gear for Striped Bass', parent_id =>'100'},

{ navigation_id => '140', priority => '1300', uri => 'logout', type => 'nav', scope => 'top-logout', name => 'Logout', description => 'Logout' },
{ navigation_id => '141', priority => '1400', uri => 'user/account', type => 'nav', scope => 'top-logout', name => 'My Account', description => 'My Account' },

]);

# manufactures
my $nav1 = $schema->resultset("Navigation")->populate([
{ uri => 'Simms', scope => 'manf', type => 'manufacturer', name => 'Simms Fishing Products', description => 'Simms', priority => '1' },
{ uri => 'Patagonia', scope => 'manf', type => 'manufacturer', name => 'Patagonia', description => 'Patagonia', priority => '2'},
{ uri => 'Orvis', scope => 'manf', type => 'manufacturer', name => 'The Orvis Company', description => 'Orvis', priority => '3' },
{ uri => 'Sage', scope => 'manf', type => 'manufacturer', name => 'Sage',  description => 'Sage', priority => '4' },
{ uri => 'Scott', scope => 'manf', type => 'manufacturer', name => 'Scott', description => 'Scott', priority => '5' },
{ uri => 'Loomis', scope => 'manf', type => 'manufacturer', name => 'Loomis', description => 'Loomis', priority => '6' },
{ uri => 'Hatch', scope => 'manf', type => 'manufacturer', name => 'Hatch Outdoors',  description => 'Hatch Outdoors', priority => '7' },
]);

# populate navigation_products array

my @navigation_products = (
['WBA0003', '5', 'item'],
);

$schema->resultset('Attribute')->create(
    {
        name             => 'rweight',
        title            => 'Choose Weight',
        type             => 'variant',
        priority         => 1,
        attribute_values => [
            { value => '00',  title => '00WT' },
            { value => '0',  title => '0WT' },
            { value => '1',  title => '1WT' },
            { value => '2',  title => '2WT' },
            { value => '3',  title => '3WT' },
            { value => '4', title => '4WT' },
            { value => '5', title => '5WT' },
            { value => '6', title => '6WT' },
            { value => '7', title => '7WT' },
            { value => '9', title => '9WT' },
            { value => '10', title => '10WT' },
        ]
    }
);

$schema->resultset('Attribute')->create(
    {
        name             => 'length',
        title            => 'Choose Length',
        type             => 'variant',
        priority         => 1,
        attribute_values => [
            { value => '6',  title => '6FT' },
            { value => '7',  title => '7FT' },
            { value => '7_6', title => '7FT 6IN' },
            { value => '7_9', title => '7FT 9IN' },
            { value => '8_4', title => '8FT 4IN' },
            { value => '8_6', title => '8FT 6IN' },
            { value => '9', title => '9FT' },
            { value => '10', title => '10FT' },
        ]
    }
);

$schema->resultset('Attribute')->create(
    {
        name             => 'action',
        title            => 'Choose Action',
        type             => 'variant',
        priority         => 1,
        attribute_values => [
            { value => 'tip',  title => 'Tip Flex' },
            { value => 'mid',  title => 'Mid Flex' },
        ]
    }
);

$schema->resultset('Attribute')->create(
    {
        name             => 'pounds',
        title            => 'Choose Pound Stength',
        type             => 'variant',
        priority         => 1,
        attribute_values => [
            { value => '12',  title => '12 lb' },
            { value => '20',  title => '20 lb' },
            { value => '30',  title => '30 lb' },
        ]
    }
);

$product{WBA0003} = $schema->resultset('Product')->create(
    {
        sku => 'WBA0003',
        name => 'Orvis Helios 2 Fly Rod',
        short_description => 'When a customer asks is the Helios 2 really better than the Helios 1.  The answer is simple just cast it.',
        description => "Helios 2 fly rods are the best fly rods we have ever produced, period. Not only are these fly rods lightweight, sensitive and extremely powerful, they have an incredible look! Made in Manchester, Vermont, Helios 2 rods are the ultimate freshwater fly rods for all anglers. The fine-tuned tapers deliver spot-on accuracy and smooth tracking. Newly designed to be lighter in hand without compromising strength and power, the Helios 2 fly rods are making fly casting easier in all conditions. Available in three or four-piece sections, the Helios 2 fly rods come in all line weights for all fly-fishing applications. A custom-finished reel seat completes the sleek look of these freshwater fly rods, allowing the rod to stand out in a crowd. Pick up the Helios 2 and make a cast and you will realize instantly why these are the best fly rods made.",
        price => '795',
        uri => 'orvis-helios-2-fly-rod',
        weight => '5',
        inventory_exempt => '1',
    }
);

$product{WBA1001} = $schema->resultset('Product')->create(
    {
        sku => 'WBA1001',
        name => 'Orvis Hydros 3D WF Trout',
        short_description => 'The finest textured fly line for trout you can put on a reel. Fully engineered with features to improve your cast and presentation for greater productivity on the stream.',
        description => "Enjoy the feel of minimal friction in your casting stroke. 3D texturing combined with IS, our most versatile trout taper, the new Hy-Flote Tip, and the new and improved welded loop, combine to offer the finest trout line we've ever offered.",
        price => '95',
        uri => 'orvis-hydros-3d-wf-trout',
        weight => '2',
        inventory_exempt => '1',
     }
);

$product{WBA2001} = $schema->resultset('Product')->create(
    {
        sku => 'WBA2001',
        name => 'Orvis Fly Line Backing',
        short_description => "Quality backing can be the differnce between landing and losing the fish of a lifetime.",
        description => "Orvis uses the finest braid to make sure you are protected from abrasion.",
        price => '7.95',
        uri => 'orvis-backing',
        weight => '1',
        inventory_exempt => '1',
    }
);

$schema->resultset('Product')->find( { sku => "WBA1001" } )->add_variants(
    {
        rweight => '3',
        sku    => 'WBA1002',
        uri    => 'orvis-hydros-3d-wf-trout-wf-3',
        price  => 95,
        weight => '5',
    },
    {
        rweight => '4',
        sku    => 'WBA1003',
        uri    => 'orvis-hydros-3d-wf-trout-wf-4',
        price  => 95,
        weight => '5',
    },
    {
        rweight => '5',
        sku    => 'WBA1004',
        uri    => 'orvis-hydros-3d-wf-trout-wf-5',
        price  => 95,
        weight => '5',
    },
    {
        rweight => '6',
        sku    => 'WBA1005',
        uri    => 'orvis-hydros-3d-wf-trout-wf-6',
        price  => 95,
        weight => '5',
    },
);

$schema->resultset('Product')->find( { sku => "WBA2001" } )->add_variants(
    {
        pounds => '12',
        sku    => 'WBA2002',
        uri    => 'orvis-backing-12lb',
        price  => '7.95',
        weight => '1',
    },
    {
        pounds => '20',
        sku    => 'WBA2003',
        uri    => 'orvis-backing-20lb',
        price  => 7.95,
        weight => '1',
    },
    {
        pounds => '30',
        sku    => 'WBA2004',
        uri    => 'orvis-backing-30lb',
        price  => '7.95',
        weight => '1',
    },
);

$schema->resultset('Product')->find( { sku => "WBA0003" } )->add_variants(
    {
        rweight => '2',
        length => '6',
        action => 'mid',
        sku    => 'WBA0001',
        name   => 'Orvis Helios 2 6ft 2wt 3pc Mid Flex',
        uri    => 'orvis-helios-2-620-3-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '2',
        length => '8_4',
        action => 'mid',
        sku    => 'WBA0002',
        name   => 'Orvis Helios 2 8ft 4in 2wt 4pc Mid Flex',
        uri    => 'orvis-helios-2-842-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '3',
        length => '7_6',
        action => 'mid',
        name   => 'Orvis Helios 2 7ft 6in 3wt 4pc Mid Flex',
        sku    => 'WBA0004',
        uri    => 'orvis-helios-2-376-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '3',
        length => '8_4',
        action => 'mid',
        name   => 'Orvis Helios 2 8ft 4in 3wt 4pc Tip Flex', 
        sku    => 'WBA0005',
        uri    => 'orvis-helios-2-384-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '3',
        length => '10',
        action => 'tip',
        name   => 'Orvis Helios 2 10ft 3wt 4pc Tip Flex',
        sku    => 'WBA0006',
        uri    => 'orvis-helios-2-3100-4-tip-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '4',
        length => '7',
        action => 'mid',
        name   => 'Orvis Helios 2 7ft 4wt 4pc Mid Flex',
        sku    => 'WBA0007',
        uri    => 'orvis-helios-2-470-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '4',
        length => '8_6',
        action => 'mid',
        name   => 'Orvis Helios 2 8ft 6in 4wt 4pc Mid Flex',
        sku    => 'WBA0008',
        uri    => 'orvis-helios-2-486-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '4',
        length => '9',
        action => 'mid',
        name   => 'Orvis Helios 2 9ft 4wt 4pc Mid Flex',
        sku    => 'WBA0009',
        uri    => 'orvis-helios-2-490-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '4',
        length => '9',
        action => 'tip',
        name   => 'Orvis Helios 2 9ft 4wt 4pc Tip Flex',
        sku    => 'WBA0010',
        uri    => 'orvis-helios-2-490-4-tip-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '4',
        length => '10',
        action => 'tip',
        name   => 'Orvis Helios 2 10ft 4wt 4pc Tip Flex',
        sku    => 'WBA0011',
        uri    => 'orvis-helios-2-4100-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '5',
        length => '7_9',
        action => 'mid',
        name   => 'Orvis Helios 2 7ft 9in 5wt 4pc Mid Flex',
        sku    => 'WBA0012',
        uri    => 'orvis-helios-2-579-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '5',
        length => '8_6',
        action => 'mid',
        name   => 'Orvis Helios 2 8ft 6in 5wt 4pc Mid Flex',
        sku    => 'WBA0013',
        uri    => 'orvis-helios-2-586-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '5',
        length => '8_6',
        action => 'tip',
        name   => 'Orvis Helios 2 8ft 6in 5wt 4pc Tip Flex',
        sku    => 'WBA0014',
        uri    => 'orvis-helios-2-586-4-tip-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '5',
        length => '9',
        action => 'mid',
        name   => 'Orvis Helios 2 9ft 5wt 4pc Mid Flex',
        sku    => 'WBA0015',
        uri    => 'orvis-helios-2-590-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '5',
        length => '9',
        action => 'tip',
        name   => 'Orvis Helios 2 9ft 5wt 4pc Tip Flex',
        sku    => 'WBA0016',
        uri    => 'orvis-helios-2-590-4-tip-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '5',
        length => '10',
        action => 'tip',
        name   => 'Orvis Helios 2 10ft 5wt 4pc Mid Flex',
        sku    => 'WBA0017',
        uri    => 'orvis-helios-2-5100-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '6',
        length => '9',
        action => 'mid',

        sku    => 'WBA0018',
        uri    => 'orvis-helios-2-690-4-mid-flex',
        price  => 795,
        weight => '5',
    },
    {
        rweight => '6',
        length => '9',
        action => 'tip',
        name   => 'Orvis Helios 2 9ft 6wt 4pc Tip Flex',
        sku    => 'WBA0019',
        uri    => 'orvis-helios-2-690-4-tip-flex',
        price  => 795,
        weight => '5',
    },
);

my $merch = $schema->resultset('MerchandisingProduct')->populate([
                                           { 
                                             sku => 'WBA0003', 
                                             sku_related => 'WBA1001',
                                             type => 'related' 
                                           },
                                           {
                                             sku => 'WBA0003',
                                             sku_related => 'WBA2001',
                                             type => 'related'
                                           },
                                          ]);

my $types = $schema->resultset('MediaType')->populate([
                                           { type => 'image' },
                                           { type => 'video' },
                                           { type => 'js' },
                                           { type => 'css' },
                                          ]);


my $images = $schema->resultset('MediaType')->find({ type => 'image' });

# for now, call the type with the size
foreach my $type (qw/120x120 169x169  325x325  50x50  70x70  975x975
                     optimized_jpgs/) {
    $images->add_to_media_displays({
                                    type => 'image_' . $type,
                                    name => 'image_' . $type,
                                    path => "/images/products/$type",
                                    size => $type,});
}

# set default for example product
my $media = $schema->resultset('Media')->populate([
                            {
                                file => 'public/images/products/optimized_jpgs/orvis_helios_2.jpg',
                                uri => 'orvis_helios_2.jpg',
                                mime_type => 'image/jpg',
                                media_types_id => '1',
                            },
                            {
                                file => 'public/images/products/optimized_jpgs/default.jpg',
                                uri => 'default.jpg',
                                mime_type => 'image/jpg',
                                media_types_id => '1',
                            },
                            {
                                uri => 'http://www.youtube.com/embed/HfhpZPdrc2A',
                                media_types_id => '2',
                            },
]);
# add all slider image assets
$media = $schema->resultset('Media')->populate([
                            {
                                file => 'public/images/camera/slides/slide1.jpg',
                                uri => 'slide1.jpg',
                                mime_type => 'image/jpg',
                                media_types_id => '1',
                                label => 'Delaware river fly fishing guide trip.'
                            },
                            {
                                file => 'public/images/camera/slides/slide2.jpg',
                                uri => 'slide2.jpg',
                                mime_type => 'image/jpg',
                                media_types_id => '1',
                                label => 'Delaware river wild brown trout.'
                            },
                            {
                                file => 'public/images/camera/slides/slide3.jpg',
                                uri => 'slide3.jpg',
                                mime_type => 'image/jpg',
                                media_types_id => '1',
                                label => 'Summer Sulphur on the Delaware.'
                            },
]);

# add all js/css assets
$media = $schema->resultset('Media')->populate([
                            {
                                file => 'public/css/rateit.css',
                                uri => 'rateit.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/css/css_002.css',
                                uri => 'css_002.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/css/css.css',
                                uri => 'css.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/css/font-awesome.css',
                                uri => 'font-awesome.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/css/jquery.css',
                                uri => 'jquery.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/css/photoswipe.css',
                                uri => 'photoswipe.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/css/bootstrap.css',
                                uri => 'bootstrap.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/css/extra_style.css',
                                uri => 'extra_style.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/css/styles.css',
                                uri => 'styles.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/css/responsive.css',
                                uri => 'responsive.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/css/superfish.css',
                                uri => 'superfish.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/css/camera.css',
                                uri => 'camera.css',
                                mime_type => 'text/css',
                                media_types_id => '4',
                            },
                            {
                                file => 'public/js/jquery-1.js',
                                uri => 'jquery-1.js',
                                mime_type => 'text/javascript',
                                media_types_id => '3',
                            },
                            {
                                file => 'public/js/jquery-migrate-1.js',
                                uri => 'jquery-migrate-1.js',
                                mime_type => 'text/javascript',
                                media_types_id => '3',
                            },
                            {
                                file => 'public/js/jquery.rateit.min.js',
                                uri => 'jquery.rateit.min.js',
                                mime_type => 'text/javascript',
                                media_types_id => '3',
                            },
                            {
                                file => 'public/js/superfish.js',
                                uri => 'superfish.js',
                                mime_type => 'text/javascript',
                                media_types_id => '3',
                            },
                            {
                                file => 'public/js/scripts.js',
                                uri => 'scripts.js',
                                mime_type => 'text/javascript',
                                media_types_id => '3',
                            },
                            {
                                file => 'public/js/bootstrap-hover-dropdown.js',
                                uri => 'bootstrap-hover-dropdown.js',
                                mime_type => 'text/javascript',
                                media_types_id => '3',
                            },
                            {
                                file => 'public/js/fitdivs.js',
                                uri => 'fitdivs.js',
                                mime_type => 'text/javascript',
                                media_types_id => '3',
                            },
]);


$schema->resultset('MediaProduct')->populate([
                                           { media_id => '1', sku => 'WBA0001' },
                                           { media_id => '1', sku => 'WBA0002' },
                                           { media_id => '1', sku => 'WBA0003' },
                                           { media_id => '1', sku => 'WBA0004' },
                                           { media_id => '1', sku => 'WBA0005' },
                                           { media_id => '1', sku => 'WBA0006' },
                                           { media_id => '1', sku => 'WBA0007' },
                                           { media_id => '3', sku => 'WBA0001' },
                                           { media_id => '3', sku => 'WBA0002' },
                                           { media_id => '3', sku => 'WBA0003' },
                                           { media_id => '3', sku => 'WBA0004' },
                                           { media_id => '3', sku => 'WBA0005' },
                                           { media_id => '3', sku => 'WBA0006' },
                                           { media_id => '3', sku => 'WBA0007' },
                                          ]);

$schema->resultset('NavigationProduct')->populate([
                                           { navigation_id => '5', sku => 'WBA0001' },
                                           { navigation_id => '5', sku => 'WBA0002' },
                                           { navigation_id => '5', sku => 'WBA0003' },
                                           { navigation_id => '5', sku => 'WBA0004' },
                                           { navigation_id => '5', sku => 'WBA0005' },
                                           { navigation_id => '5', sku => 'WBA0006' },
                                           { navigation_id => '5', sku => 'WBA0007' },
                                           { navigation_id => '5', sku => 'WBA0008' },
                                           { navigation_id => '5', sku => 'WBA0009' },
                                           { navigation_id => '5', sku => 'WBA0010' },
                                           { navigation_id => '5', sku => 'WBA0011' },
                                           { navigation_id => '5', sku => 'WBA0012' },
                                           { navigation_id => '5', sku => 'WBA0013' },
                                           { navigation_id => '5', sku => 'WBA0014' },

]);

$product{WBA0003}->add_to_reviews(
                    {
                    title           => '1',
                    message_types_id   => '3',
                    content         => "The Helios 2 fly rod changed my life I can't say enough good things about it.",
                    author_users_id          =>  $users{john}->id,
                    rating          => '5.0',
                    recommend       => '1',
                    public          => '1',
                    approved        => '1',
                    approved_by_users_id     => $users{sam}->id,
                 },
);

$schema->resultset('Product')->find( { sku => "WBA0017" } )->add_to_reviews(
                                    {
                                        title           => '1',
                                        message_types_id   => '3',
                                        content         => "It's a fine rod but to me it's way over priced.",
                                        author_users_id          =>  $users{ben}->id,
                                        rating          => '3.5',
                                        recommend       => '1',
                                        public          => '1',
                                        approved        => '1',
                                        approved_by_users_id     => $users{sam}->id,
                                    },
);

