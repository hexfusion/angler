[set page_title][L]Shipping Options[/L]: [L]Choose Service[/L][/set]
[set ui_class]Orders[/set]
[set help_name]order.view[/set]
[set icon_name]icon_orders.gif[/set]
@_UI_STD_HEAD_@


[query type=list sql="SELECT * FROM orderline WHERE order_number LIKE '[cgi order]'"]

[list]

[if term='[cgi [sql-code]-shipped]' op='eq' compare='0']

[query sql="UPDATE orderline set status = 'processing_backordered', quantity_shipped = '[cgi [sql-code]-shipped]', quantity_backordered = '[cgi [sql-code]-backordered]' WHERE code='[sql-param code]'"] [/query]
[query sql="UPDATE transactions set status = 'processing-1' WHERE code='[cgi order]'"][/query]

[elsif term='[cgi [sql-code]-shipped]' op='<' compare='[sql-param quantity]']

[query sql="UPDATE orderline set status = 'processing_partial_backorder', quantity_shipped = '[cgi [sql-code]-shipped]', quantity_backordered = '[cgi [sql-code]-backordered]' WHERE code='[sql-param code]'"][/query]
[query sql="UPDATE transactions set status = 'processing-1' WHERE code='[cgi order]'"][/query]
[/elsif]

[else]

[query sql="UPDATE orderline set status = 'processing_shipped', quantity_shipped = '[cgi [sql-code]-shipped]', quantity_backordered = '[cgi [sql-code]-backordered]' WHERE code='[sql-code]'"][/query]
[query sql="UPDATE transactions set status = 'processing-1' WHERE code='[cgi order]'"][/query]
[/else]
[/if]

[/list]

[/query]

 @_UI_STD_FOOTER_@
      
